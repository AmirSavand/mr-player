function _classCallCheck(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(r,o){for(var s=0;s<o.length;s++){var e=o[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function _createClass(r,o,s){return o&&_defineProperties(r.prototype,o),s&&_defineProperties(r,s),r}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"B3c+":function(r,o,s){"use strict";s.r(o);var e=s("ofXK"),a=s("3Pt+"),n=s("tyNb"),t=s("fXoL"),i=s("H+bZ"),c=s("lGQG");function d(r,o){if(1&r&&(t.Tb(0,"div",24),t.Ac(1),t.Sb()),2&r){var s=t.dc();t.Bb(1),t.Cc(" ",s.changePasswordError.old_password[0]," ")}}function b(r,o){if(1&r&&(t.Tb(0,"div",24),t.Ac(1),t.Sb()),2&r){var s=t.dc();t.Bb(1),t.Cc(" ",s.changePasswordError.new_password1[0]," ")}}function l(r,o){if(1&r&&(t.Tb(0,"div",24),t.Ac(1),t.Sb()),2&r){var s=t.dc();t.Bb(1),t.Cc(" ",s.changePasswordError.new_password2[0]," ")}}function u(r,o){if(1&r&&(t.Tb(0,"div",25),t.Ac(1),t.Sb()),2&r){var s=t.dc();t.Bb(1),t.Bc(s.successPasswordMessage)}}var f,p,w=[{path:"",component:(f=function(){function r(o,s,e){_classCallCheck(this,r),this.formBuilder=o,this.api=s,this.auth=e,this.changePasswordError={}}return _createClass(r,[{key:"ngOnInit",value:function(){var r=this;this.auth.user.subscribe((function(o){r.user=o,r.form=r.formBuilder.group({display_name:[o.account.name],image:[o.account.image],bio:[o.account.bio],color:[o.account.color]})})),this.changePasswordForm=this.formBuilder.group({old_password:["",a.p.required],new_password1:["",a.p.required],new_password2:["",a.p.required]})}},{key:"submit",value:function(){var r=this;this.loading||(this.loading=!0,this.api.account.update(this.user.username,this.form.value).subscribe((function(o){r.loading=!1,r.user.account=o,r.auth.setUser(r.user)})))}},{key:"changePassword",value:function(){var r=this;this.loading||(this.loading=!0,this.auth.changePassword(this.changePasswordForm.value).subscribe((function(o){r.loading=!1,r.successPasswordMessage=o.detail,r.changePasswordError={},r.changePasswordForm.reset()}),(function(o){r.loading=!1,r.successPasswordMessage="",r.changePasswordError=o.error})))}}]),r}(),f.\u0275fac=function(r){return new(r||f)(t.Ob(a.c),t.Ob(i.a),t.Ob(c.a))},f.\u0275cmp=t.Ib({type:f,selectors:[["app-user-settings"]],decls:48,vars:8,consts:[[1,"container","py-3"],[1,"row","justify-content-center"],[1,"col-lg-4"],[1,"card","my-3"],[1,"card-header"],[1,"card-body",3,"formGroup","ngSubmit"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","formControlName","display_name",1,"form-control"],["for","image"],["type","text","id","image","formControlName","image",1,"form-control"],["for","bio"],["type","text","id","bio","formControlName","bio",1,"form-control"],["for","color"],["id","color","type","color","formControlName","color",1,"form-control"],[1,"btn","btn-block","btn-info",3,"disabled"],["for","old_password"],["type","password","id","old_password","formControlName","old_password",1,"form-control"],["class","text-danger",4,"ngIf"],["for","new_password1"],["type","password","id","new_password1","formControlName","new_password1",1,"form-control"],["for","new_password2"],["type","password","id","new_password2","formControlName","new_password2",1,"form-control"],["class","alert alert-success",4,"ngIf"],[1,"text-danger"],[1,"alert","alert-success"]],template:function(r,o){1&r&&(t.Tb(0,"div",0),t.Tb(1,"div",1),t.Tb(2,"div",2),t.Tb(3,"div",3),t.Tb(4,"div",4),t.Ac(5,"Settings"),t.Sb(),t.Tb(6,"form",5),t.bc("ngSubmit",(function(){return o.submit()})),t.Tb(7,"div",6),t.Tb(8,"label",7),t.Ac(9,"Display name"),t.Sb(),t.Pb(10,"input",8),t.Sb(),t.Tb(11,"div",6),t.Tb(12,"label",9),t.Ac(13,"Image from imgur.com"),t.Sb(),t.Pb(14,"input",10),t.Sb(),t.Tb(15,"div",6),t.Tb(16,"label",11),t.Ac(17,"Your bio"),t.Sb(),t.Pb(18,"input",12),t.Sb(),t.Tb(19,"div",6),t.Tb(20,"label",13),t.Ac(21,"Your color"),t.Sb(),t.Pb(22,"input",14),t.Sb(),t.Tb(23,"button",15),t.Ac(24,"Update"),t.Sb(),t.Sb(),t.Sb(),t.Sb(),t.Tb(25,"div",2),t.Tb(26,"div",3),t.Tb(27,"div",4),t.Ac(28,"Change Password"),t.Sb(),t.Tb(29,"form",5),t.bc("ngSubmit",(function(){return o.changePassword()})),t.Tb(30,"div",6),t.Tb(31,"label",16),t.Ac(32,"Old password"),t.Sb(),t.Pb(33,"input",17),t.yc(34,d,2,1,"div",18),t.Sb(),t.Tb(35,"div",6),t.Tb(36,"label",19),t.Ac(37,"New password"),t.Sb(),t.Pb(38,"input",20),t.yc(39,b,2,1,"div",18),t.Sb(),t.Tb(40,"div",6),t.Tb(41,"label",21),t.Ac(42,"Confirm new password"),t.Sb(),t.Pb(43,"input",22),t.yc(44,l,2,1,"div",18),t.Sb(),t.yc(45,u,2,1,"div",23),t.Tb(46,"button",15),t.Ac(47,"Submit"),t.Sb(),t.Sb(),t.Sb(),t.Sb(),t.Sb(),t.Sb()),2&r&&(t.Bb(6),t.jc("formGroup",o.form),t.Bb(17),t.jc("disabled",o.loading),t.Bb(6),t.jc("formGroup",o.changePasswordForm),t.Bb(5),t.jc("ngIf",o.changePasswordError.old_password),t.Bb(5),t.jc("ngIf",o.changePasswordError.new_password1),t.Bb(5),t.jc("ngIf",o.changePasswordError.new_password2),t.Bb(1),t.jc("ngIf",o.successPasswordMessage),t.Bb(1),t.jc("disabled",o.loading||o.changePasswordForm.invalid))},directives:[a.r,a.k,a.e,a.b,a.j,a.d,e.m],styles:[""]}),f),data:{title:"User Settings"}}],m=((p=function r(){_classCallCheck(this,r)}).\u0275mod=t.Mb({type:p}),p.\u0275inj=t.Lb({factory:function(r){return new(r||p)},imports:[[n.g.forChild(w)],n.g]}),p);s.d(o,"UserSettingsModule",(function(){return h}));var g,h=((g=function r(){_classCallCheck(this,r)}).\u0275mod=t.Mb({type:g}),g.\u0275inj=t.Lb({factory:function(r){return new(r||g)},imports:[[e.c,m,a.n]]}),g)}}]);